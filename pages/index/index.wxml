<!--index.wxml-->

<!-- ç­›é€‰å™¨ -->
<view class="filter-bar">
  <!-- åœ°åŒºç­›é€‰ -->
<view class = "filter-item" bindtap="goToCitySelect">
    <view class="filter-content">
      <text>{{city}}</text>
      <view class="arrow-down"></view>
    </view>
</view>

  <!-- ç»„åˆ«ç­›é€‰ -->
  <picker 
    class="filter-item" 
    mode="selector" 
    range="{{categories}}" 
    value="{{categoryIndex}}" 
    bindchange="onCategoryChange"
  >
    <view class="filter-content">
      <text>{{categories[categoryIndex]}}</text>
      <view class="arrow-down"></view>
    </view>
  </picker>

  <!-- æ—¥æœŸç­›é€‰ -->
  <picker 
    class="filter-item" 
    mode="selector" 
    range="{{dateSelect}}" 
    value="{{dateSelectIndex}}" 
    bindchange="onDateChange"
  >
    <view class="filter-content">
      <text>{{dateShow||'å…¨éƒ¨æ—¥æœŸ'}}</text>
      <view class="arrow-down"></view>
    </view>
  </picker>

    <!-- æ—¥æœŸé€‰æ‹©å™¨ -->
  <van-calendar 
  show="{{ showCalendar }}" 
  bind:close="onCloseCalendar" 
  bind:confirm="onConfirmDate" 
  title="é€‰æ‹©æ—¥æœŸ"
  />

  <!-- æœç´¢æŒ‰é’® -->
  <view class="search-btn" bindtap="onSearch">
    <icon type="search" size="24" color="#666" />
  </view>
</view>

<!-- ä¸»å†…å®¹åŒºåŸŸ -->
<view class="main-content">
  <!-- èµ›äº‹åˆ—è¡¨ -->
  <view class="match-list">
    <!-- æœ‰æ•°æ®æ—¶æ˜¾ç¤ºèµ›äº‹åˆ—è¡¨ -->
    <block wx:if="{{matches.length > 0}}">
      <block wx:for="{{matches}}" wx:key="id">
      <view class="match-card" bindtap="onMatchDetail" data-id="{{item.id}}">
        <!-- èµ›äº‹çŠ¶æ€æ ‡ç­¾ -->
        <view class="status-badge" wx:if="{{item.status === 'upcoming'}}">
          å³å°†å¼€å§‹
        </view>
        <view class="status-badge ended" wx:if="{{item.status === 'ended'}}">
          å·²ç»“æŸ
        </view>
        
        <!-- èµ›äº‹å›¾ç‰‡ -->
        <view class="match-image">
          <image src="{{item.image}}" mode="aspectFill"></image>
        </view>
        
        <!-- èµ›äº‹ä¿¡æ¯ -->
        <view class="match-info">
          <view class="match-title">{{item.title}}</view>
          
          <!-- èµ›äº‹è¯¦æƒ… -->
          <view class="match-details">
            <!-- æ—¥æœŸ -->
            <view class="detail-item">
              <van-icon class="detail-icon" name="calendar-o" size="16" color="#999"></van-icon>
              <text class="detail-text">{{item.date.year}}å¹´{{item.date.month}}æœˆ{{item.date.day}}æ—¥</text>
            </view>
            
            <!-- åœ°ç‚¹ -->
            <view class="detail-item">
              <van-icon class="detail-icon" name="location-o" size="16" color="#1c12a1ff"></van-icon>
              <text class="detail-text">{{item.location}}</text>
            </view>
          </view>
          
          <!-- åˆ†äº«æŒ‰é’® -->
          <view class="share-btn">
            <van-icon name="share-o" size="20" color="#df3535ff"></van-icon>
          </view>
        </view>
      </view>
      </block>
    </block>
    
    <!-- æ— æ•°æ®æ—¶æ˜¾ç¤ºæç¤º -->
    <block wx:else>
      <view class="empty-data">
        <text class="empty-icon">ğŸ“</text>
        <text class="empty-text">æš‚æ— èµ›äº‹æ•°æ®</text>
      </view>
    </block>
  </view>
</view>


